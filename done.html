<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>FinFlow - Smart Finance Manager</title>
  <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600&display=swap" rel="stylesheet" />
  <style>
    /* Reset and Global Styles */
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
      font-family: 'Poppins', sans-serif;
    }
    body {
      background: radial-gradient(circle, #1acffc96, #e2a46a60);
      background-position: center;
      color: #3d3838;
      animation: gradientBG 15s ease infinite; 
      flex-direction: column;
      padding: 20px;
      align-items: center;
    }
    /* Authentication Styles */
    #authContainer {
      height: 100vh;
  width: 100%;
  background: linear-gradient(deg, #8f82f1, #9ef8e6, #fdcb6e, #ff7675);
  background-size: 400% 400%;
  animation: gradientBG 15s ease infinite;
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: center;
  color: white;
  text-align: center;
  padding: 20px;
    }
    .auth-box {
      background: #fff;
      padding: 30px;
      border-radius: 15px;
      box-shadow: 0 5px 15px rgba(0,0,0,0.1);
      width: 350px;
      text-align: center;
    }
    .auth-box h2 {
      margin-bottom: 20px;
      color: #2d3436;
    }
    .auth-box input {
      width: 100%;
      padding: 12px;
      margin-bottom: 15px;
      border: 2px solid #dfe6e9;
      border-radius: 8px;
      font-size: 16px;
    }
    .auth-box button {
      width: 100%;
      background: #6c5ce7;
      color: white;
      border: none;
      padding: 12px;
      border-radius: 8px;
      cursor: pointer;
      font-size: 16px;
      transition: background 0.3s ease;
    }
    .auth-box button:hover {
      background: #5b4bca;
    }
    .toggle-auth {
      margin-top: 10px;
      color: #636e72;
      cursor: pointer;
      text-decoration: underline;
    }
    .project-title {
      text-align: center;
  font-size: 3rem;
  font-weight: 700;
  margin-bottom: 10px;
  animation: fadeInDown 1s ease forwards;
}

.tagline {
  text-align: center;
  font-size: 1.2rem;
  margin-bottom: 30px;
}

    /* Main App Styles */
    .container {
      max-width: 1200px;
      margin: 0 auto;
      padding: 30px 20px;
      display: none; /* Hidden until login */
    }
    .header {
      text-align: center;
      margin-bottom: 40px;
    }
    .header h1 {
      font-size: 2.5rem;
      color: #2d3436;
      margin-bottom: 10px;
    }
    .stats {
      display: grid;
      grid-template-columns: repeat(3, 1fr);
      gap: 20px;
      margin-bottom: 30px;
    }
    .stat-box {
      background: white;
      padding: 20px;
      border-radius: 10px;
      text-align: center;
    }
    .stat-box h3 {
      color: #4d91aa;
      margin-bottom: 10px;
    }
    .stat-value {
      font-size: 24px;
      font-weight: 600;
    }
    .income {
      color: #00b894;
    }
    .expense {
      color: #d63031;
    }
    .grid {
      display: grid;
      grid-template-columns: 1fr 1fr;
      gap: 30px;
      margin-bottom: 40px;
    }
    .card {
      background: white;
      padding: 25px;
      border-radius: 15px;
      box-shadow: 0 5px 15px rgba(0,0,0,0.1);
    }
    .form-group {
      margin-bottom: 20px;
    }
    label {
      display: block;
      margin-bottom: 8px;
      font-weight: 500;
      color: #636e72;
    }
    input, select {
      width: 100%;
      padding: 12px;
      border: 2px solid #dfe6e9;
      border-radius: 8px;
      font-size: 16px;
      transition: border-color 0.3s ease;
    }
    input:focus, select:focus {
      border-color: #6c5ce7;
      outline: none;
    }
    button {
      background: #6c5ce7;
      color: white;
      border: none;
      padding: 12px 25px;
      border-radius: 8px;
      cursor: pointer;
      font-size: 16px;
      transition: background 0.3s ease;
    }
    button:hover {
      background: #5b4bca;
    }
    .transactions {
      margin-top: 30px;
    }
    .transaction-item {
      display: flex;
      justify-content: space-between;
      align-items: center;
      padding: 15px;
      margin-bottom: 15px;
      background: #fff;
      border-radius: 8px;
      box-shadow: 0 2px 5px rgba(0,0,0,0.05);
    }
    .transaction-item div {
      display: flex;
      align-items: center;
    }
    .transaction-item small {
      margin-left: 10px;
      color: #636e72;
    }
    .delete-btn, .edit-btn {
      background: #ff7675;
      color: white;
      border: none;
      padding: 6px 12px;
      border-radius: 5px;
      cursor: pointer;
      margin-left: 5px;
      font-size: 14px;
    }
    .edit-btn {
      background: #fdcb6e;
    }
    .chart-container {
      height: 400px;
      position: relative;
    }
    /* Logout Button */
    #logoutBtn {
      float: right;
      background: #d63031;
      margin-top: -40px;

      .project-title {
  font-size: 3rem;
  font-weight: 700;
  margin-bottom: 10px;
  animation: fadeInDown 1s ease forwards;
}
.babuchak{
  color: white;
}

.tagline {
  font-size: 1.2rem;
  margin-bottom: 30px;
  animation: fadeInUp 1s ease forwards;
    }
    @keyframes gradientBG {
  0% {background-position: 0% 50%;}
  50% {background-position: 100% 50%;}
  100% {background-position: 0% 50%;}
}

@keyframes fadeInDown {
  from { opacity: 0; transform: translateY(-50px); }
  to { opacity: 1; transform: translateY(0); }
}

@keyframes fadeInUp {
  from { opacity: 0; transform: translateY(50px); }
  to { opacity: 1; transform: translateY(0); }
}
.project-title {
  position: absolute;
  top: 40px;
  font-size: 2.8rem;
  font-weight: 700;
  color: #6c5ce7;
}

@keyframes fadeSlide {
  0% { opacity: 0; transform: translateY(-20px); }
  100% { opacity: 1; transform: translateY(0); }
}

.project-tagline {
  text-align: center;
  position: absolute;
  top: 90px;
  font-size: 1rem;
  color: #636e72;
  font-weight: 500;
}
@keyframes gradientBG {
  0% {background-position: 0% 50%;}
  50% {background-position: 100% 50%;}
  100% {background-position: 0% 50%;}
}

@keyframes fadeInDown {
  from { opacity: 0; transform: translateY(-50px); }
  to { opacity: 1; transform: translateY(0); }
}

@keyframes fadeInUp {
  from { opacity: 0; transform: translateY(50px); }
  to { opacity: 1; transform: translateY(0); }
}
    #logoutBtn:hover {
      background: #d63031;
    }
    @keyframes slideUp {
  from { opacity: 0; transform: translateY(20px); }
  to { opacity: 1; transform: translateY(0); }
}
.transaction-item {
  animation: slideUp 0.5s ease;
}
.slide-down {
  opacity: 0;
  transform: translateY(-50px);
  animation: slideDown 1s ease-out forwards;
}

@keyframes slideDown {
  to {
    opacity: 1;
    transform: translateY(0);
  }
}


  </style>
</head>
<body>
  <!-- Authentication Container -->

  <div id="authContainer">
    <div class="auth-box" id="loginBox">
      <h2>Login</h2>
      <input type="text" id="loginUsername" placeholder="Username" required>
      <input type="password" id="loginPassword" placeholder="Password" required>
      <button id="loginBtn">Login</button>
      <div class="toggle-auth" id="toSignup">Don't have an account? Sign Up</div>
    </div>
    <div class="auth-box" id="signupBox" style="display: none;">
      <h2>Sign Up</h2>
      <input type="text" id="signupUsername" placeholder="Username" required>
      <input type="password" id="signupPassword" placeholder="Password" required>
      <button id="signupBtn">Sign Up</button>
      <div class="toggle-auth" id="toLogin">Already have an account? Login</div>
    </div>
  </div>

  <!-- Main App Container -->
  <div class="container" id="appContainer">
    <div class="header">
      <h1 class="babuchak">ðŸ’° FinFlow</h1>
      <p class="babuchak">Smart Personal Finance Management</p>
      <button id="logoutBtn">Logout</button>
    </div>

    <div class="stats">
      <div class="stat-box">
        <h3>Total Income</h3>
        <div class="stat-value income" id="totalIncome">â‚¹0</div>
      </div>
      <div class="stat-box">
        <h3>Total Expense</h3>
        <div class="stat-value expense" id="totalExpense">â‚¹0</div>
      </div>
      <div class="stat-box">
        <h3>Balance</h3>
        <div class="stat-value" id="balance">â‚¹0</div>
      </div>
    </div>

    <div class="grid">
      <div class="card">
        <h2>Add Income</h2>
        <form id="incomeForm">
          <div class="form-group">
            <label>Title</label>
            <input type="text" id="incomeTitle" required>
          </div>
          <div class="form-group">
            <label>Amount</label>
            <input type="number" id="incomeAmount" required>
          </div>
          <div class="form-group">
            <label>Category</label>
            <select id="incomeCategory" required>
              <option value="Salary">Salary</option>
              <option value="Freelance">Freelance</option>
              <option value="Investment">Investment</option>
            </select>
          </div>
          <button type="submit">Add Income</button>
        </form>
      </div>

      <div class="card">
        <h2>Add Expense</h2>
        <form id="expenseForm">
          <div class="form-group">
            <label>Title</label>
            <input type="text" id="expenseTitle" required>
          </div>
          <div class="form-group">
            <label>Amount</label>
            <input type="number" id="expenseAmount" required>
          </div>
          <div class="form-group">
            <label>Category</label>
            <select id="expenseCategory" required>
              <option value="Food">Food</option>
              <option value="Transport">Transport</option>
              <option value="Entertainment">Entertainment</option>
            </select>
          </div>
          <div class="form-group">
            <label>Date</label>
            <input type="date" id="expenseDate" max="" required>
          </div>
          <button type="submit">Add Expense</button>
        </form>
      </div>
    </div>

    <div class="grid">
      <div class="card">
        <h2>Income Breakdown</h2>
        <div class="chart-container">
          <canvas id="incomeChart"></canvas>
        </div>
      </div>
      <div class="card">
        <h2>Expense Breakdown</h2>
        <div class="chart-container">
          <canvas id="expenseChart"></canvas>
        </div>
      </div>
    </div>

    <div class="card">
      <h2>Recent Transactions</h2>
      <div class="transactions" id="transactionList"></div>
    </div>
  </div>

  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
  <script>
    document.addEventListener('DOMContentLoaded', () => {
      
      // Authentication Code
      const authContainer = document.getElementById('authContainer');
      const appContainer = document.getElementById('appContainer');
      const loginBox = document.getElementById('loginBox');
      const signupBox = document.getElementById('signupBox');
      const loginBtn = document.getElementById('loginBtn');
      const signupBtn = document.getElementById('signupBtn');
      const toSignup = document.getElementById('toSignup');
      const toLogin = document.getElementById('toLogin');
      const logoutBtn = document.getElementById('logoutBtn');
      
      // Use a separate flag for login status
      function isLoggedIn() {
        return localStorage.getItem('loggedIn') === 'true';
      }
      
      // For demo purposes, user credentials are stored in localStorage.
      function getUser() {
        return JSON.parse(localStorage.getItem('user')) || null;
      }
      function saveUser(user) {
        localStorage.setItem('user', JSON.stringify(user));
      }
      
      function showApp() {
        localStorage.setItem('loggedIn', 'true');
        authContainer.style.display = 'none';
        appContainer.style.display = 'block';
        updateUI(); // load data upon login
      }
      function showAuth() {
        localStorage.setItem('loggedIn', 'false');
        authContainer.style.display = 'flex';
        appContainer.style.display = 'none';
      }
      
      // Signup Handler
      signupBtn.addEventListener('click', () => {
        const username = document.getElementById('signupUsername').value.trim();
        const password = document.getElementById('signupPassword').value.trim();
        if(username && password) {
          saveUser({ username, password });
          alert('Sign up successful! Please log in.');
          signupBox.style.display = 'none';
          loginBox.style.display = 'block';
        } else {
          alert('Please fill both username and password.');
        }
      });
      
      // Login Handler
      loginBtn.addEventListener('click', () => {
        const username = document.getElementById('loginUsername').value.trim();
        const password = document.getElementById('loginPassword').value.trim();
        const user = getUser();
        if(user && user.username === username && user.password === password) {
          showApp();
        } else {
          alert('Invalid credentials. Please try again.');
        }
      });
      
      // Toggle between Signup and Login views
      toSignup.addEventListener('click', () => {
        loginBox.style.display = 'none';
        signupBox.style.display = 'block';
      });
      toLogin.addEventListener('click', () => {
        signupBox.style.display = 'none';
        loginBox.style.display = 'block';
      });
      
      // Logout Handler
      logoutBtn.addEventListener('click', () => {
        showAuth();
      });
      
      // ---------------------------
      // Chart Setup
      // ---------------------------
      let incomeChart, expenseChart;
      const chartOptions = {
        responsive: true,
        maintainAspectRatio: false,
        plugins: {
          legend: { position: 'right' },
          tooltip: {
            callbacks: {
              label: (ctx) => {
                const label = ctx.label || '';
                const value = ctx.raw || 0;
                return `${label}: â‚¹${value.toFixed(2)}`;
              }
            }
          }
        }
      };
      
      function initChart(ctx, type) {
        return new Chart(ctx, {
          type: type || 'pie',
          data: { labels: [], datasets: [{ data: [], backgroundColor: ['#6c5ce7', '#00b894', '#fdcb6e', '#ff7675'] }] },
          options: chartOptions
        });
      }
      
      // Date Validation for Expense Date
      document.getElementById('expenseDate').max = new Date().toISOString().split('T')[0];
      
      // Data Management Functions
      function getData(key) {
        return JSON.parse(localStorage.getItem(key)) || [];
      }
      function saveData(key, data) {
        localStorage.setItem(key, JSON.stringify(data));
        updateUI();
      }
      
      // Update UI Functions (Transactions, Charts, Stats)
      function updateUI() {
        updateTransactions();
        updateCharts();
        updateStats();
      }
      
      // Income Form Submission
      document.getElementById('incomeForm').addEventListener('submit', e => {
        e.preventDefault();
        const transaction = {
          id: Date.now(),
          type: 'income',
          title: document.getElementById('incomeTitle').value,
          amount: parseFloat(document.getElementById('incomeAmount').value),
          category: document.getElementById('incomeCategory').value,
          date: new Date().toISOString()
        };
        saveData('income', [...getData('income'), transaction]);
        e.target.reset();
      });
      
      // Expense Form Submission
      document.getElementById('expenseForm').addEventListener('submit', e => {
        e.preventDefault();
        const transaction = {
          id: Date.now(),
          type: 'expense',
          title: document.getElementById('expenseTitle').value,
          amount: parseFloat(document.getElementById('expenseAmount').value),
          category: document.getElementById('expenseCategory').value,
          date: document.getElementById('expenseDate').value
        };
        saveData('expense', [...getData('expense'), transaction]);
        e.target.reset();
      });
      
      // Transaction List (Display, Edit, Delete)
      window.deleteTransaction = function(id, type) {
        const data = getData(type).filter(t => t.id !== id);
        saveData(type, data);
      };
      
      window.editTransaction = function(id, type) {
        const data = getData(type);
        const transaction = data.find(t => t.id === id);
        if(transaction) {
          const newTitle = prompt("Update Title:", transaction.title);
          if(newTitle !== null) transaction.title = newTitle;
          const newAmount = prompt("Update Amount:", transaction.amount);
          if(newAmount !== null) transaction.amount = parseFloat(newAmount);
          saveData(type, data);
        }
      };
      
      function updateTransactions() {
        const transactions = [...getData('income'), ...getData('expense')]
          .sort((a, b) => new Date(b.date) - new Date(a.date));
        const html = transactions.map(t => `
          <div class="transaction-item">
            <div>
              <strong>${t.title}</strong>
              <small>${new Date(t.date).toDateString()}</small>
            </div>
            <div style="color: ${t.type === 'income' ? '#00b894' : '#d63031'}">
              â‚¹${t.amount.toFixed(2)}
              <button class="edit-btn" onclick="editTransaction(${t.id}, '${t.type}')">Edit</button>
              <button class="delete-btn" onclick="deleteTransaction(${t.id}, '${t.type}')">Ã—</button>
            </div>
          </div>
        `).join('');
        document.getElementById('transactionList').innerHTML = html;
      }
      
      // Update Charts
      function updateCharts() {
        updateChart('income', incomeChart);
        updateChart('expense', expenseChart);
      }
      
      function updateChart(type, chart) {
        const data = getData(type);
        const categories = data.reduce((acc, t) => {
          acc[t.category] = (acc[t.category] || 0) + t.amount;
          return acc;
        }, {});
        chart.data.labels = Object.keys(categories);
        chart.data.datasets[0].data = Object.values(categories);
        chart.update();
      }
      
      // Update Statistics
      function updateStats() {
        const income = getData('income').reduce((sum, t) => sum + t.amount, 0);
        const expense = getData('expense').reduce((sum, t) => sum + t.amount, 0);
        document.getElementById('totalIncome').textContent = `â‚¹${income.toFixed(2)}`;
        document.getElementById('totalExpense').textContent = `â‚¹${expense.toFixed(2)}`;
        document.getElementById('balance').textContent = `â‚¹${(income - expense).toFixed(2)}`;
        document.getElementById('balance').style.color = (income - expense) >= 0 ? '#00b894' : '#d63031';
      }
      
      // Initialize Charts on Load
      incomeChart = initChart(document.getElementById('incomeChart').getContext('2d'));
      expenseChart = initChart(document.getElementById('expenseChart').getContext('2d'));
      
      if (isLoggedIn()) {
        showApp();
      } else {
        showAuth();
      }
    });
  </script>
</body>
</html>
